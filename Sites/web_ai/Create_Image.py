from GPT3_openai_4 import GPT3
import PIL
from PIL import ImageFont
from PIL import Image
from PIL import ImageDraw
import textwrap

list2 = [(None, 'Если посадить лук весной, уже осенью можно получить хороший урожай овоща, но для этого нужно правильно определить сроки посевных работ и организовать за посадкой грамотный уход. Данный процесс нетрудоемкий, но требует соблюдения определенной агротехники и правил выращивания овощной культуры. Обо всем этом читайте далее.  ', '<img alt="Посадка лука" class="aligncenter size-full wp-image-32412" height="400" itemprop="url contentUrl" src="с" width="600"/> '), ('Когда сажать?', 'Чтобы весной определить оптимальные сроки проведения посадочных работ, нужно учитывать как конкретные погодные условия, так и подходящие даты по Лунному календарю. Посадку лука можно производить только после того, как отступят морозы, и установится стабильная теплая погода. Грунт при этом должен прогреться на глубину 5-8 см до +12…14°C, иначе лук прорастет в стрелку, и зелень будет расти больше, чем сама репка. Как правило, подходящая погода устанавливается в конце апреля – первых числах мая. Точные сроки зависят от конкретного региона: Жители средней полосы России приступают к выращиванию овоща с цветением черемухи. Если лук выращивается в теплице, посадку можно производить на 2-3 недели раньше указанных сроков. Вне зависимости от региона проживания, с посадкой лука не стоит затягивать, иначе из-за высоких температур и недостатка естественной влаги луковица будет медленно развиваться, что чревато снижением намеченной урожайности. Чтобы точно определиться с датами посадочных работ, многие огородники ориентируются на Лунный календарь, согласно которому весной для посадки лука благоприятными периодами являются: Посаженный в эти дни лук дает крупные луковицы и сочную зелень. ', ''), ('Какие сорта можно высаживать?', 'Для весенней посадки предпочтителен лук средней фракции, в диаметре достигающий 14-21 мм, поскольку такая форма не дает стрелков и легче приживается. Что касается конкретных сортов, то подходящими являются:   Лук Центурион F1   Лук Штутгартер Ризен   Лук Ред Барон   Лук Стурон   Лук Геркулес   Лук Стардаст  Опытные овощеводы выбирают именно эти сорта за их качественные характеристики и неприхотливость в выращивании. ', '<img class="sp-thumbnail" height="400" src="https://ferma.expert/wp-content/uploads/2019/07/dscn5985f.webp" width="600"/> '), ('Обработка посадочного материала', 'Какую подготовку провести, зависит от того, что используется в качестве посадочного материала – семена или севок. Каждый вариант рассмотрим отдельно. Чтобы вырастить лук на перо, его посадку нужно произвести семенами. К их обработке можно приступать за 25-28 дней до посевных работ. Производится она в таком порядке:  После такой обработки можно получить сильные мелкие семена лука, которые будут пригодны для равномерного посева. При выращивании лука на головку посадку нужно производить севками. Их можно приобрести в садовом магазине или вырастить самостоятельно из чернушки, отдавая предпочтение районированным сортам. В любом случае для весенней посадки подходят луковицы с такими характеристиками: Не подходят для посадки луковицы, которым свойственны следующие особенности: Чтобы выращенный своими руками севок был пригоден для посадки весной, его нужно правильно хранить зимой – при температуре 15°C и влажности 70%. Непосредственно к обработке севков нужно приступать за месяц до их посадки. Она заключается в проведении следующих манипуляций:  Если планируется вырастить перо, то перед посадкой у луковиц нужно срезать верхушки.  ', '<img alt="Подготовка лука к посадке" class="aligncenter size-full wp-image-32421" height="400" itemprop="url contentUrl" sizes="(max-width: 600px) 100vw, 600px" src="https://ferma.expert/wp-content/uploads/2019/07/post_5c8b61ebd486c.webp" srcset="https://ferma.expert/wp-content/uploads/2019/07/post_5c8b61ebd486c.webp 600w,https://ferma.expert/wp-content/uploads/2019/07/post_5c8b61ebd486c-300x200.webp 300w" width="600"/> '), ('Выбор участка и подготовка грядок', 'Место под посадку лука нужно выбирать еще с осени. Это должен быть хорошо освещенный участок, поскольку луковичные растения тяжело растут в тени и нуждаются в большом количестве прямых солнечных лучей. Если лук и вырастет без них, то головки получатся очень мелкими. Не менее важно при выборе участка учесть правила севооборота: Что касается почвы, то она должна быть рыхлой и с невысокой кислотностью. Отлично лук растет на черноземах или суглинках, хорошо пропускающих воздух и влагу. Выбранный участок с подходящими параметрами надо грамотно подготовить. Данную процедуру можно разделить на два этапа:  К тому же, при таянии снега влага дольше задержится в почве. При перекопке землю нужно удобрить – внести на 1 кв. м по 5 кг перепревшего навоза или компоста. Из минеральных удобрений на 1 кв. м стоит внести 30 г суперфосфата и 15 г хлористого калия. До весны все внесенные удобрения растворятся, и плодородие почвы восстановится. ', ''), ('Посадка лука в грунт', 'Схема посадки зависит от того, через какой посадочный материал возделывается овощная культура. Производится по такой схеме: Если между лунками выдержать меньше 1 см, удастся получить хорошее перо – зелень будет расти больше, чем репка. После посева почву нужно полить и мульчировать, используя для этого древесные опилки или солому. Саму посадку нужно накрыть темной пленкой, чтобы не допустить её пересыхания. Перед посадкой нужно подготовить грядки на расстоянии 25-30 см. Расстояние между бороздками зависит от размера головок: Севок не стоит слишком глубоко погружать в землю. С появлением корней он затянется еще глубже в почву, поэтому всходов придется ждать еще дольше, а урожай получится мелким и ослабленным. Оптимальная глубина заделки луковиц – 4,5-5 см, чтобы над плечиками лука оставался слой почвы в 2,5-3,5 см. После посадки грядку нужно полить и мульчировать соломой или опилками, чтобы влага дольше задерживалась в грунте до прорастания луковиц. О тонкостях посева лука-севка на протяжении всего мая рассказывается в видео ниже:  ', ''), ('Уход за весенней посадкой', 'Для получения хорошего урожая нужно соблюдать правила по уходу за посадкой. Они заключаются в своевременном проведении ряда агротехнических мероприятий. Недостаток влаги весной приведет к тому, что перо приобретет сизоватый или белый оттенок, а кончики подсохнут и перегнутся. При этом нельзя допускать и избытка влаги, иначе перо получится бледным и тонким, а качество выращенного лука ухудшится. Так, крайне важно организовать умеренный полив культуры, придерживаясь следующей схемы:  Не менее раза в 2-2,5 недели после поливов или дождей нужно рыхлить почву. Это важная процедура, которой нельзя пренебрегать по следующим причинам: Если допустить образование на поверхности грунта непроницаемой корки, лук начнет задыхаться и отстанет в развитии, а перо – побледнеет и даже пожелтеет. Если предпосевная подкормка грунта была произведена правильно, то дополнительно нужно удобрять только бедную почву. Однако даже при правильной подготовке вегетация лука может происходить вяло. В этом случае поможет летняя подкормка посадки для стимуляции роста перьев. Она производится с помощью раствора, который готовится из таких веществ (на ведро воды): Данный состав нужно внести под корень растений из расчета 3-3,5 л на 1 кв. м. Через 12-16 дней подкормку можно повторить. Если после подкормки зелень начнет активно расти и пойдет в стрелки, их потребуется сразу же удалить. Чтобы не допустить развития грибковых заболеваний, при достижении пера лука в высоту 12-16 см нужно произвести профилактическую обработку – опрыснуть грядки раствором из 5-8 г жидкого хозяйственного мыла и 15-20 г медного купороса на 10 л воды.  Если не произвести обработку овощной культуры, то её могут поразить следующие патогенные грибки: Что касается вредителей, то среди них особую опасность представляют: Для защиты луковой грядки от атак любых вредителей нужно тщательно очищать огород от растительных остатков и прочего мусора. ', ''), ('Сбор и хранение урожая', 'К уборке лука можно приступать в период со 2-3 недели августа до начала сентября. О спелости урожая будут свидетельствовать такие признаки: Уборку урожая откладывать нельзя, иначе головки вновь начнут расти, и лук станет непригодным для хранения. Приступать к сборке урожая нужно в солнечный день или пасмурную, но сухую погоду. Если не удается оборвать стебли, лук и севок можно выдернуть руками. Чтобы не повредить луковые репки, их стоит аккуратно подкопать вилами. Собранный урожай лука и севка нужно просушить. В солнечную погоду его можно расстелить прямо на грядках. Взрослая репка в естественных условиях просохнет через 7 дней, а севок – через 3-4 дня. Если же погода пасмурная, собранный урожай придется сушить под навесом при хорошей циркуляции воздушных масс. После сушки у луковиц нужно обрезать стебли, оставляя при этом шейки длиной 3-4 см. Далее их нужно правильно отсортировать, чтобы крупные экземпляры употребить в пищу, а мелкие (диаметром до 3 см) – сохранить как семена на зеленое перо. ', '')]

text = list2[0][1]
promt = f'Напиши 1 предложение. Совет на основе: {text}'
advice = GPT3(promt)
print(advice)


img_path = '123.webp'
img = Image.open(img_path)
h = img.height
w = img.width
print(h, w)

font = ImageFont.truetype("arial.ttf", 20)
bg = Image.new("RGB", (512, 512), "white")



text = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."

image = Image.open("123.webp")
draw = ImageDraw.Draw(image)
# font = ImageFont.truetype("arial.ttf", 25, encoding='utf=8')
# draw.text((100, 100), text, font=font, fill="#aa0000")
# image.save("image.jpg")


margin = offset = 40
for line in textwrap.wrap(text, width=40):

    draw.text((w/2, round(h*3/4)+offset), line, font=font, fill="black")
    offset += 20
draw.rectangle((w/2, round(h*3/4), w/2,round(h*3/4)+offset), fill=(255, 255, 255), )
image.show()
#
# offset = 25
# for line in textwrap.wrap(advice, width=120):
#     ImageDraw.Draw(img).text((h/2, w/2), f"{advice}", fill="#aa0000", font=font)
#     offset += font.getsize(line)[1]
#     img.show()
# img.show()
